## Statements

- Declarations and expressions ending with `;`
- Parts of a program that specify the order of execution

The categories of statements available in C++ are:
1. expression statements
2. compound statements (sequence of statements between `{}`)
3. selection statements (`if`, `if else`, `switch`)
4. iteration statements (`while`, `do`, `for`)
5. jump statements (`break`, `continue`, `return`)
6. declaration statements
7. try blocks (`try`) for exception handling
8. empty statement (`;`)

## Declarations as statements
- A declaration is a statement.
- The instruction is executed when the control passes through the declaration.
- Allows better locality of the code.
- Minimizes uninitialized variables.

Do not declare and initialize later – a declaration as a statement makes it possible to introduce the variable when it is needed and a value is available for it.

> This does not hold for variables declared `static` (more on this when we discuss functions).

---
## Selection statements - if

```cpp
if (condition) statement
    
```

**Good practice:** use a compound statement (i.e., enclose it in a block) – otherwise:

- if there is more than one statement after the `if`, only the first is considered to be the statement conditioned by the `if`;
- for example, variables can be declared and initialized only in a compound statement.

It would be pointless to have a single instruction that declares a variable that is not used, as it goes out of scope before the next instruction.

It is possible to declare and initialize a variable in a condition
- The scope ends at the end of the statement after the if
- The condition will test the value of the variable
- Improve locality and minimize uninitialized variables

---
## if conditions

- You can use a boolean value or an expression.
- If different from a boolean, there is an implicit conversion.

```cpp
int x = 1;
if (x) // equivalent to if(x != 0)
{
    // do something
}

int* p = &x;
if (p) // eq. to if(p != nullptr)
{
    // do something
}
```

---
## if conditions – logical operators

It is possible to use logical operators to combine conditions:

- `a && b` — **and**, true if both conditions are true
- `a || b` — **or**, true if at least one of the two conditions is true
- `!a` — **not**, true if _a_ is false

---

## if conditions – lazy evaluation

- **Lazy evaluations:**
    - Always check the first condition in expressions with logical operators.   
    - Evaluate the second only if the first is not enough.
    - Pay attention when using functions (e.g., with a boolean return type) in conditions.

```cpp
bool c1 = false;
bool c2 = true;

if (c1 && c2)
{ 
    // c2 is not evaluated 
}

if (c2 && c1)
{ 
    // both evaluated 
}

if (c1 && someFunction(c2))
{ 
    // someFunction(c2) is not evaluated
    // this may be done on purpose (always comment it!)
    // it could also lead to errors if not done on purpose
}
```

---

## Conditional expression

- The **conditional expression** or **ternary operator** allows the selection of an expression among two, according to the evaluation of a third expression.
- Use it only for simple statements!

```cpp
val = expression1 ? expression2 : expression3
//            true        false
```

Example:

```cpp
// with ternary operator
int x = 1;
int x2 = (x == 1) ? 2 : 3;
// se x=1, allora x2 uguale a 2, altrimenti x2 = 3

// equivalent to
int x2;
if (x == 1) {
    x2 = 2;
}
else {
    x2 = 3;
}
```


---

## switch statement

- Select among a set of alternatives (**case** labels).
- Generates more efficient compiled code compared to `if`.

```cpp
switch (variable) 
{
    case val1:
        // code
    case val2:
        // code
}
```

Works with type **integer** or **enum** (or user-defined types that can be implicitly converted to integer or enum).

---

## switch statement - termination

- Terminate the code of the case.
- Use `break` (exits the switch) or `return` (exits the function containing the switch).
- Otherwise, the next case is executed (“**fall through**”).
- Explicitly comment if fall through is intentional.

```cpp
switch (action) 
{
    case do_and_print:
        act(value);
        // no need to implement print
        // fall through the next case
    case print:
        print(value);
        break;
    case something_else:
        something(value);
        break;
}
```

---

## switch statement - default

- There is a **default case**.
- Used to handle:
    - The most common case, or
    - Cases not covered by the switch (e.g., by raising an exception).
- Do **not** use it with **enumerators**:
    - The compiler can warn if the set of cases does not match the set of enumerator values.
    - In the future we may want to add more enum values.

```cpp
switch (action) 
{
    case 1:
        // code
        break;
    case 2:
        // code
        break;
    default:
        // code
}
```

---

## Range-for statements

- Loop and access to each element of a range.
- Works with **sequences or ranges** – entities that:
    - yield an iterator for the beginning and the end of the sequence,
    - have a `begin()` / `end()` member pair.
- Examples: C++ arrays, `std::vector<T>`.
- Loops **over values** cannot modify the values.
- If the values need to be modified, the loop variable must be a **reference**.

```cpp
std::vector<int> v {1, 2, 3, 4};
//this uses a copy of the values
for (int value : v) 
{
    std::cout << value << std::endl;
}
//Here the values are modified using reference
for (int& value : v) 
{
    std::cout << value << std::endl;
}
```

---

## for statements

- More general than range-for statements.

```cpp
for (int i = 0; i < 10; i++) 
{
    std::cout << i << std::endl;
}
```

Structure:  
`for (for-init-statement; condition (optional); expression (optional))`

- A variable (such as `int i`) can be declared and initialized here, and its scope ends at `}`.
- If it has to be available after the loop, it must be declared and initialized **before** the `for`.

---

### Examples

```cpp
std::vector<T> c;
for (auto p = c.begin(); p != c.end(); ++p) 
{
    // do something
}

int i = 0;
for (; i < 10;) 
{
    i++;
}

for (;;) 
{
    // endless loop
}
```

---

## for statements – pre-increment

- **Pre-increment:** increment, and then evaluate the new value.
- **Post-increment:** increment the value but evaluate the old value.

In C++, **pre-increment is preferred** when they are equivalent (e.g., in `for` loops):

- It avoids the (implicit) generation of an extra temporary variable.
- No difference with **fundamental types**.
- Performance difference with **user-defined types** (e.g., iterators on standard library data structures).

---
## while statements

- Check the control condition; if true, execute the body.
- It can be more natural to express **complex conditions** with a `while` than with a `for`, which logically depends more on a single variable.

```cpp
int i = 0;
while (i < 10) 
{
    // do something
    ++i;
}
```

---

## do statements

- Execute once, then check the control condition and execute again if true.
    
- The body of the statement is **executed at least once**.
    
- If some logic about the condition is used in the body, the condition must hold at the first execution.
    

```cpp
int i = 0;
do
{
    ++i;
} while (i < 10);
```

---

## Loop exit

- If the condition is omitted, or it is always true, the loop does not exit.

It is possible to terminate a loop with specific statements:

- **`break` statement** – exits the nearest-enclosing `switch` or iteration statement.
    - If it depends on a condition, it is better to put the condition directly in the `for` / `while`.
- **`continue` statement** – skips to the next iteration of an iteration statement.
    - The code between the `continue` and the end of the block is **not executed**.
- A **`return`** terminates a loop, but also the **function** that encloses the loop.